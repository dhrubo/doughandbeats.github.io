<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Feed Test</title>
    <style>
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; max-width: 600px; margin: 2rem auto; }
        .post { aspect-ratio: 1; border-radius: 8px; overflow: hidden; }
        .post img { width: 100%; height: 100%; object-fit: cover; }
        .fallback { background: #f3f4f6; display: flex; align-items: center; justify-content: center; color: #666; }
    </style>
</head>
<body>
    <h1 style="text-align: center;">Instagram Feed Test</h1>
    <div id="instagram-grid" class="grid"></div>

    <script>
        // Test loading the Instagram JSON and displaying images
        fetch('/instagram.json')
            .then(response => response.json())
            .then(data => {
                const grid = document.getElementById('instagram-grid');
                
                data.posts.slice(0, 9).forEach(post => {
                    const div = document.createElement('div');
                    div.className = 'post';
                    
                    const img = document.createElement('img');
                    img.src = post.local_image ? `/${post.local_image}` : post.image_url;
                    img.alt = post.caption || 'Instagram post';
                    img.onerror = function() {
                        div.innerHTML = `<div class="fallback">Image not found:<br>${this.src}</div>`;
                    };
                    
                    div.appendChild(img);
                    grid.appendChild(div);
                });
                
                console.log('Instagram data loaded:', data);
            })
            .catch(error => {
                console.error('Error loading Instagram feed:', error);
                document.getElementById('instagram-grid').innerHTML = 
                    '<div style="text-align: center; color: red;">Failed to load Instagram feed</div>';
            });
    </script>
</body>
</html>
